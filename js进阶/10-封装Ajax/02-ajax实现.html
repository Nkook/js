<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<body>
  <!-- 用http-server开启一个静态的服务器 10-封装Ajax %  http-server
        默认会开启一个8080端口的服务器，默认访问本地的 http://127.0.0.1:8080
        这个服务器只有一个01-ajax页面 和data文件夹数据 -->
  <h1>Ajax</h1>
  <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
  <script>
    // axios.get("/data/tea.txt").then((res) => {
    //   console.log(res.data)  // 奶茶
    //   return axios.get("/data/hotPot.txt")
    // }).then((res) => {
    //   console.log(res.data) // 火锅
    // })

    // 我们使用XMLHttpRequest对象，封装一个自定义的axios方法
    // xhr.readyState 状态
    // 0：请求末初始化，还没有调用 open()。
    // 1：请求已经建立，但是还没有发送，还没有调用 send()。
    // 2：请求已发送，正在处理中（通常现在可以从响应中获取内容头）。
    // 3：请求在处理中；通常响应中已有部分数据可用了，没有全部完成。
    // 4：响应已完成；可以获取并使用服务器的响应了。

    let xhr = new XMLHttpRequest()
    xhr.onreadystatechange = function() {
      // console.log('状态变化', xhr.readyState)
      if(xhr.readyState === 4) {
        if(xhr.status === 200) {
          console.log('数据', xhr.responseText) // 数据 奶茶
        } else {
          console.log('获取数据失败')
        }
      }
    }
    xhr.open('get', "/data/tea.txt")
    xhr.send()
  </script>
</body>
</html>